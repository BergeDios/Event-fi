{% extends 'base.html' %}

{% block html_head %}
    <link rel="stylesheet" href="/static/styles/profiles.css" type="text/css">
    <script src="/static/scripts/profilepopups.js" type="module" async></script>
    <script src="/static/scripts/profilenav.js" type="module" async></script>
    <script src="/static/scripts/profilebuttons.js" type="module" async></script>
{% endblock html_head %}

{% block wrapper %}
    <div class="back">
        <i class='bx bx-arrow-back' onclick="javascript:location.href ='/index'"></i>
    </div>
{% endblock wrapper %}

{% block header %}
    <div class="avatar" id="{{user._id}}"></div>
    <div class="userinfo">
        <div class="names">{{user.name}} {{user.last_name}}</div>
        <div class="username">@{{user.username}}</div>
        <button class="edit_prof" onclick="javascript:location.href ='user/settings'">Edit profile</button>
    </div>
{% endblock header %}

{% block nav%}
<div class="selection">
    <span id="events" class="selected">Eventos</span>
    <span id="groups">Grupos</span>
    <span id="contacts">Contactos</span>
</div>
{% endblock nav%}

{% block container %}
    <div class="content">
        <ul class="list">
            <div id="userevents">
                {% if user.events %}
                    {% for value in user.events %}
                        <li> 
                            <div class="listevent" id="{{value.event_id}}"> 
                                <div class="image"> 
                                    <div class="img"> 
                                    </div> 
                                </div> 
                                <div class="info"> 
                                <p>  {{ value.name }} </p> 
                                <p>  {{ value.start_date}}  </p> 
                                <p>  {{ value.location }}  </p> 
                                </div> 
                                <div class="manage"> 
                                    <div class="manage-button"> 
                                        <i id="trash" class='bx bx-trash'></i>
                                    </div> 
                                </div> 
                            </div> 
                        </li>
                {% endfor %}
                {% else %}
                    <li style="text-align: center; margin-top: 30px; display:block;"> Parece que no tienes ningún evento próximamente</li>
                {% endif %}
                </div>
                <div id="usergroups" class="none">
                {% if user.groups %}
                    {% for value in user.groups %}
                        <li> 
                            <div class="listgroup" id="{{value.group_id}}"> 
                                <div class="image"> 
                                    <div class="img"> 
                                    </div> 
                                </div> 
                                <div class="info"> 
                                <p>  {{value.name}}  </p>  
                                </div> 
                                <div class="manage"> 
                                    <div class="manage-button-group"> 
                                        <i class='bx bx-x'></i>
                                    </div> 
                                </div> 
                            </div> 
                        </li>
                {% endfor %}
                {% else %}
                    <li style="text-align: center; margin-top: 30px; display:block;"> Parece que no tienes ningún grupo</li>
                {% endif %}
                </div>
                <div id="usercontacts" class="none">
                <div class="searchcontact">
                    <input type="text" placeholder="Añadir a mis contactos" id="searchcontact">
                    <div class="searchbutton" id="addcontact">
                        <i class='bx bx-plus'></i>
                    </div>
                </div>
                <div class="margin"> </div>
                {% if user.contacts %}
                    {% for value in user.contacts %}
                        <li> 
                            <div class="listcontact" id="{{value._id}}"> 
                                <div class="image"> 
                                    <div class="img"> 
                                    </div> 
                                </div> 
                                <div class="info"> 
                                <p>  {{value.name}} {{value.last_name}} </p>
                                <p>  {{value.username}}  </p>
                                </div> 
                                <div class="manage"> 
                                    <div class="manage-button-contact"> 
                                        <i id="trash" class='bx bx-user-x'></i>
                                    </div> 
                            </div> 
                        </li>
                {% endfor %}
                {% else %}
                    <li style="text-align: center; margin-top: 30px; display:block;"> Parece que no tienes ningún contacto</li>
                {% endif %}
                </div>
        </ul>
    </div>
{% endblock container %}